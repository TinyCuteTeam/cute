<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /*div 배경*/
        .srBack {
            width: 1000px;
            height: 700px;
        }

        /* plus이미지 버튼 오른쪽에 붙이기  */
        .srPlus {
            width: 1000px;
            text-align: right;
        }

        /* plus 이미지 추가버튼 */
        .plus {
            width: 30px;
        }

        .addBtn {
            height: 50px;
            border: 0px;
            background-color: white;
        }

        .delButton {
            border: 0px;
            background-color: #ffffff;
        }

        .editButton {
            border: 0px;
            background-color: #ffffff;
        }

        .sr_bom {
            margin-left: auto;
            margin-right: auto;
            width: 1000px;

            border-collapse: collapse;
            text-align: center;
        }

        .srTh {
            background-color: #e6e6e6;
            height: 50px;
        }

        .bin {
            width: 30px;
        }

        .pen {
            width: 30px;
        }

        .plus {
            width: 30px;
        }

        .addBtn {
            border: 0px;
            background-color: white;
        }

        /* 품목코드 표 */
        .srTable {
            width: 1000px;
            border-collapse: collapse;
            text-align: center;
            margin: auto;
            width: 1000px;
            height: 500px;
        }

        /* 품목코드표 제일 위 메뉴 */
        .srTh {
            background-color: #e6e6e6;
            height: 40px;
        }

        /* 재료이미지 */
        .ingre {
            width: 50px;
            height: 50px;
        }
    </style>

</head>

<body>
    <div class="srBack">
        <h1 style="text-align: center;">품목코드 표</h1>

        <!-- addBtn버튼 plus 이미지 오른쪽에 배치-->
        <div class="srPlus">
            <button class="addBtn">
                <img class="plus" src="https://cdn-icons-png.flaticon.com/512/32/32339.png">
            </button>
        </div>

        <!-- 표 -->
        <table id="table" class="sr_bom " border="solid black 1px;">
            <tr>
                <th class="srTh">품목코드</th>
                <th class="srTh">품목명</th>
                <th class="srTh">이미지</th>
                <th class="srTh">수정</th>
                <th class="srTh">삭제</th>
            </tr>
            <tr>
                <td>M001</td>
                <td>밀가루</td>
                <td><img class="ingre"
                        src="https://img.danawa.com/prod_img/500000/287/183/img/2183287_1.jpg?_v=20210422154436">
                </td>
                <!-- 수정버튼 -->
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <!-- 삭제버튼 -->
                <td><button class="delButton"><img class="bin"
                            src="https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M002</td>
                <td>물</td>
                <td><img class="ingre" src="https://www.highwaymart.co.kr/Data/Upload/Mall/202001/NRQ4JOEY197I.jpg">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M003</td>
                <td>소금</td>
                <td><img class="ingre"
                        src="https://cdn.shopify.com/s/files/1/0635/8715/6212/files/f5679eaa29291e87f201dece4b0a1dcf.jpg?v=1652251313">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M004</td>
                <td>다진 돼지고기</td>
                <td><img class="ingre"
                        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYZtFsMZ9LpOuoX_i_jBMtpNiw3LloBnaxkg&s">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M005</td>
                <td>다진 양파</td>
                <td><img class="ingre"
                        src="https://media.istockphoto.com/id/470507039/ko/%EC%82%AC%EC%A7%84/%EB%8B%A4%EC%A7%84-%EC%96%91%ED%8C%8C%ED%98%95.jpg?s=612x612&w=0&k=20&c=Bg-zXAHq5YoJ2WUccM8ugFRXpw_YfRXh4UdtKugTemY=">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>

            <tr>
                <td>M006</td>
                <td>대파</td>
                <td><img class="ingre"
                        src="https://www.nongmin.com/-/raw/srv-nongmin/data2/content/image/2017/08/29/.cache/512/20170829129799.jpg">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M007</td>
                <td>간장</td>
                <td><img class="ingre"
                        src="https://www.sempio.com/image/MT/MU/2022110712225092502c90265-adcf-49c0-82ae-8f2f6da04bc8.png">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M008</td>
                <td>참기름</td>
                <td><img class="ingre"
                        src="https://img.danawa.com/prod_img/large/group_868/434432_1.jpg?_v=20200203173740"></td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M009</td>
                <td>후추</td>
                <td><img class="ingre"
                        src="https://img.danawa.com/prod_img/500000/038/789/img/2789038_1.jpg?_v=20161108190618">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M010</td>
                <td>마늘</td>
                <td><img class="ingre"
                        src="https://m.dyaga.com/web/product/big/20200319/f1943c8a4e78d812e0fd21a7724dd0b7.jpg">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M015</td>
                <td>김치</td>
                <td><img class="ingre"
                        src="https://i.namu.wiki/i/O1Z-Nm3Bq-grP5ebmnPeizxI6nmij93lv8GOc3PE_c3R-GLSiwljFk7N-7FBD0_hKyB5esEjjMXxRWzj0ypZ3w.webp">
                </td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>

        </table>

        <div style="display: none;">
            <form id="srForm">
                <input type="text" class="code" placeholder="품목코드">
                <input type="text" class="name" placeholder="품목명">
                <input type="text" class="image" placeholder="이미지">
            </form>
        </div>

    </div>
</body>
<script>
    //삭제 누르면 표 한줄이 삭제되도록 
    document.querySelectorAll(".delButton").forEach(function (button) {
        button.addEventListener('click', function (event) {
            event.currentTarget.parentNode.parentNode.remove();
        });
    });
    // 수정 버튼 클릭 시 수정할 수 있는 입력 필드 생성
    let editButtons = document.querySelectorAll(".editButton");
    editButtons.forEach(function (button) {
        button.addEventListener('click', function (event) {
            let tableRow = event.currentTarget.parentNode.parentNode;
            let cells = tableRow.querySelectorAll('td');
            let isEditing = button.classList.contains('editing');

            if (isEditing) {
                // 저장 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let inputField = cells[i].querySelector('input');
                    if (inputField) {
                        cells[i].textContent = inputField.value;
                    }
                }
                button.querySelector('img').src = 'https://cdn-icons-png.flaticon.com/512/764/764599.png';
                button.classList.remove('editing');
            } else {
                // 수정 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let currentCell = cells[i];
                    let currentValue = currentCell.textContent;
                    let inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.value = currentValue;
                    currentCell.textContent = '';
                    currentCell.appendChild(inputField);
                }
                button.querySelector('img').src = 'https://static-00.iconduck.com/assets.00/save-icon-2048x2048-iovw4qr4.png';
                button.classList.add('editing');
            }
        });
    });

    //버튼 누르면 추가
    document.querySelector('.addBtn').addEventListener('click', function () {
        let code = document.querySelector('.code').value;
        let name = document.querySelector('.name').value;
        let image = document.querySelector('.image').value;

        let table = document.querySelector('#table');
        let newRow = table.insertRow();
        // let newRow1 = table[1].insertRow();

        // console.log('클릭')
        // newRow.insertCell(0).textContent = code;
        newRow.insertCell(0).innerHTML = `품목코드`;
        newRow.insertCell(1).innerHTML = `품목명`;
        newRow.insertCell(2).innerHTML = `<input type="file" class="real-upload" accept="image/*" required multiple>`;
        newRow.insertCell(3).innerHTML = `<button class="editButton"><img class="pen" src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button>`;
        newRow.insertCell(4).innerHTML = `<button class="delButton"><img class="bin" src="https://cdn-icons-png.flaticon.com/512/484/484662.png"></button>`;

        document.getElementById('srForm').reset();

        // 새로운 버튼에도 이벤트 리스너 추가
        newRow.querySelector('.delButton').addEventListener('click', function (event) {
            event.currentTarget.parentNode.parentNode.remove();
        });

        newRow.querySelector('.editButton').addEventListener('click', function (event) {
            let button = event.currentTarget;
            let tableRow = button.parentNode.parentNode;
            let cells = tableRow.querySelectorAll('td');
            let isEditing = button.classList.contains('editing');

            if (isEditing) {
                // 저장 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let inputField = cells[i].querySelector('input');
                    if (inputField) {
                        cells[i].textContent = inputField.value;
                    }
                }
                button.querySelector('img').src = 'https://cdn-icons-png.flaticon.com/512/764/764599.png';
                button.classList.remove('editing');
            } else {
                // 수정 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let currentCell = cells[i];
                    let currentValue = currentCell.textContent;
                    let inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.value = currentValue;
                    currentCell.textContent = '';
                    currentCell.appendChild(inputField);
                }
                button.querySelector('img').src = 'https://static-00.iconduck.com/assets.00/save-icon-2048x2048-iovw4qr4.png';
                button.classList.add('editing');
            }
        });

    });


</script>

</html>