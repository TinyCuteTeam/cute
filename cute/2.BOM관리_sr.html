<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOM레시피관리</title>
    <style>
        /* 배경 */
        .sr_grey {
            width: 1000px;
            height: 700px;
        }

        .sr_mandoo {
            display: flex;
            justify-content: space-between;
            margin-right: 50px;
            width: 1000px;
        }

        #recipeSelect {
            padding: 5px 20px;
            font-weight: 700;
            border-radius: 5px;
        }

        /* 추가버튼 */
        .addBtn {
            border: 0px;
            background-color: white;
        }

        /* 플러스이미지 */
        .plus {
            width: 30px;
        }

        /* 김치만두, 고기만두 테이블에 적용되는 css */
        .sr_bom {
            width: 1000px;
            border-collapse: collapse;
            text-align: center;
        }

        /* 삭제버튼 */
        .delButton {
            border: 0px;
            background-color: #ffffff;
        }

        /* 휴지통이미지 */
        .bin {
            width: 30px;
        }

        /* 수정버튼 */
        .editButton {
            border: 0px;
            background-color: #ffffff;
        }

        /* 연필이미지 */
        .pen {
            width: 30px;
        }

        /* 테이블헤드 색상, 크기 설정 */
        .srTh {
            background-color: #e6e6e6;
            height: 50px;
        }

        .meat {
            display: none;
        }
    </style>

</head>

<body>
    <div class="sr_grey">
        <h1 style="text-align: center;">레시피 관리</h1>

        <!--sr_mandoo: 레시피선택, 1개기준, 플러스버튼 -->
        <div class="sr_mandoo">
            <!-- 제품 레시피 선택  -->
            <form>
                <select id="recipeSelect">
                    <option value="kimchi">김치만두 / A00001</option>
                    <option value="meat">고기만두 / A00002</option>
                </select>
                <button>
                    <a href="2.BOM관리_제품추가.html">제품추가</a>
                </button>
            </form>
            1개 기준
            <!-- 재료 추가버튼 -->
            <button type="button" class="addBtn">
                <img class="plus" src="https://cdn-icons-png.flaticon.com/512/32/32339.png">
            </button>
        </div>

        <!-- 김치만두 표-->
        <table id="table" class="sr_bom kimchi" border="solid black 1px;">
            <tr>
                <th class="srTh">품목코드</th>
                <th class="srTh">품목명</th>
                <th class="srTh">수량</th>
                <th class="srTh">단위</th>
                <th class="srTh">비고</th>
                <th class="srTh">수정</th>
                <th class="srTh">삭제</th>
            </tr>
            <tbody>
                <tr>
                    <td>M001</td>
                    <td>밀가루</td>
                    <td>500</td>
                    <td>g</td>
                    <td>만두피 재료</td>
                    <!-- 수정버튼 -->
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <!-- 삭제버튼 -->
                    <td><button class="delButton"><img class="bin"
                                src="https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M002</td>
                    <td>물</td>
                    <td>200</td>
                    <td>ml</td>
                    <td>반죽용</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M003</td>
                    <td>소금</td>
                    <td>5</td>
                    <td>g</td>
                    <td>반죽의 맛을 위해</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M004</td>
                    <td>다진 돼지고기</td>
                    <td>300</td>
                    <td>g</td>
                    <td>만두 속 재료</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M005</td>
                    <td>다진 양파</td>
                    <td>100</td>
                    <td>g</td>
                    <td>만두 속 재료</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M015</td>
                    <td>김치</td>
                    <td>100</td>
                    <td>g</td>
                    <td>만두 속 재료</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M006</td>
                    <td>대파</td>
                    <td>30</td>
                    <td>g</td>
                    <td>만두 속 재료</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M007</td>
                    <td>간장</td>
                    <td>15</td>
                    <td>ml</td>
                    <td>만두 속 양념</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M008</td>
                    <td>참기름</td>
                    <td>10</td>
                    <td>ml</td>
                    <td>만두 속 양념</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M009</td>
                    <td>후추</td>
                    <td>2</td>
                    <td>g</td>
                    <td>만두 속 양념</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>
                <tr>
                    <td>M010</td>
                    <td>마늘</td>
                    <td>10</td>
                    <td>g</td>
                    <td>만두 속 양념</td>
                    <td><button class="editButton"><img class="pen"
                                src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                    <td><button class="delButton"><img class="bin"
                                src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
                </tr>

            </tbody>

        </table>

        <!-- 고기만두 표-->
        <table id="table" class="sr_bom meat" border="solid black 1px;">
            <tr>
                <th class="srTh">품목코드</th>
                <th class="srTh">품목명</th>
                <th class="srTh">수량</th>
                <th class="srTh">단위</th>
                <th class="srTh">비고</th>
                <th class="srTh">수정</th>
                <th class="srTh">삭제</th>
            </tr>
            <tr>
                <td>M001</td>
                <td>밀가루</td>
                <td>500</td>
                <td>g</td>
                <td>만두피 재료</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M002</td>
                <td>물</td>
                <td>200</td>
                <td>ml</td>
                <td>반죽용</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M003</td>
                <td>소금</td>
                <td>5</td>
                <td>g</td>
                <td>반죽의 맛을 위해</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M004</td>
                <td>다진 돼지고기</td>
                <td>300</td>
                <td>g</td>
                <td>만두 속 재료</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M005</td>
                <td>다진 양파</td>
                <td>100</td>
                <td>g</td>
                <td>만두 속 재료</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M006</td>
                <td>대파</td>
                <td>30</td>
                <td>g</td>
                <td>만두 속 재료</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M007</td>
                <td>간장</td>
                <td>15</td>
                <td>ml</td>
                <td>만두 속 양념</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M008</td>
                <td>참기름</td>
                <td>10</td>
                <td>ml</td>
                <td>만두 속 양념</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M009</td>
                <td>후추</td>
                <td>2</td>
                <td>g</td>
                <td>만두 속 양념</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
            <tr>
                <td>M010</td>
                <td>마늘</td>
                <td>10</td>
                <td>g</td>
                <td>만두 속 양념</td>
                <td><button class="editButton"><img class="pen"
                            src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button></td>
                <td><button class="delButton"><img class="bin"
                            src=" https://cdn-icons-png.flaticon.com/512/484/484662.png"></button></td>
            </tr>
        </table>
        <div style="display: none;">
            <form id="srForm">
                <input type="text" class="code" placeholder="품목코드">
                <input type="text" class="name" placeholder="품목명">
                <input type="text" class="amount" placeholder="수량">
                <input type="text" class="unit" placeholder="단위">
                <input type="text" class="etc" placeholder="비고">
            </form>
        </div>

    </div>
</body>

<script>
    // 고기만두가 선택되었을 때 고기만두 테이블이 나오도록 
    // 김치테이블을 display none 해두기 
    document.getElementById('recipeSelect').addEventListener('change', function () {
        let kimchidiv = document.querySelector('.kimchi');
        let meatdiv = document.querySelector('.meat');

        // 선택된 값에 따라 해당 div 보이기
        if (this.value === 'kimchi') {
            meatdiv.style.display = 'none';
            kimchidiv.style.display = 'table';
        } else if (this.value === 'meat') {
            kimchidiv.style.display = 'none';
            meatdiv.style.display = 'table';
        }
    });

    //삭제 누르면 표 한줄이 삭제되도록 
    document.querySelectorAll(".delButton").forEach(function (button) {
        button.addEventListener('click', function (event) {
            event.currentTarget.parentNode.parentNode.remove();
        });
    });
    // 수정 버튼 클릭 시 수정할 수 있는 입력 필드 생성
    let editButtons = document.querySelectorAll(".editButton");
    editButtons.forEach(function (button) {
        button.addEventListener('click', function (event) {
            let tableRow = event.currentTarget.parentNode.parentNode;
            let cells = tableRow.querySelectorAll('td');
            let isEditing = button.classList.contains('editing');

            if (isEditing) {
                // 저장 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let inputField = cells[i].querySelector('input');
                    if (inputField) {
                        cells[i].textContent = inputField.value;
                    }
                }
                button.querySelector('img').src = 'https://cdn-icons-png.flaticon.com/512/764/764599.png';
                button.classList.remove('editing');
            } else {
                // 수정 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let currentCell = cells[i];
                    let currentValue = currentCell.textContent;
                    let inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.value = currentValue;
                    currentCell.textContent = '';
                    currentCell.appendChild(inputField);
                }
                button.querySelector('img').src = 'https://static-00.iconduck.com/assets.00/save-icon-2048x2048-iovw4qr4.png';
                button.classList.add('editing');
            }
        });
    });

    //버튼 누르면 
    document.querySelector('.addBtn').addEventListener('click', function () {
        let code = document.querySelector('.code').value;
        let name = document.querySelector('.name').value;
        let amount = document.querySelector('.amount').value;
        let unit = document.querySelector('.unit').value;
        let etc = document.querySelector('.etc').value;

        let table = document.querySelectorAll('#table');
        let newRow = table[0].insertRow();
        let newRow1 = table[1].insertRow();

        // console.log('클릭')
        // newRow.insertCell(0).textContent = code;
        newRow.insertCell(0).innerHTML = `코드`;
        newRow.insertCell(1).innerHTML = `품목명`;
        newRow.insertCell(2).innerHTML = `수량`;
        newRow.insertCell(3).innerHTML = `단위`;
        newRow.insertCell(4).innerHTML = `비고`;
        newRow.insertCell(5).innerHTML = `<button class="editButton"><img class="pen" src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button>`;
        newRow.insertCell(6).innerHTML = `<button class="delButton"><img class="bin" src="https://cdn-icons-png.flaticon.com/512/484/484662.png"></button>`;

        newRow1.insertCell(0).innerHTML = `코드`;
        newRow1.insertCell(1).innerHTML = `품목명`;
        newRow1.insertCell(2).innerHTML = `수량`;
        newRow1.insertCell(3).innerHTML = `단위`;
        newRow1.insertCell(4).innerHTML = `비고`;
        newRow1.insertCell(5).innerHTML = `<button class="editButton"><img class="pen" src="https://cdn-icons-png.flaticon.com/512/764/764599.png"></button>`;
        newRow1.insertCell(6).innerHTML = `<button class="delButton"><img class="bin" src="https://cdn-icons-png.flaticon.com/512/484/484662.png"></button>`;

        document.getElementById('srForm').reset();

        // 새로운 버튼에도 이벤트 리스너 추가
        newRow.querySelector('.delButton').addEventListener('click', function (event) {
            event.currentTarget.parentNode.parentNode.remove();
        });

        //고기만두 삭제
        newRow1.querySelector('.delButton').addEventListener('click', function (event) {
            event.currentTarget.parentNode.parentNode.remove();
        });

        newRow.querySelector('.editButton').addEventListener('click', function (event) {
            let button = event.currentTarget;
            let tableRow = button.parentNode.parentNode;
            let cells = tableRow.querySelectorAll('td');
            let isEditing = button.classList.contains('editing');

            if (isEditing) {
                // 저장 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let inputField = cells[i].querySelector('input');
                    if (inputField) {
                        cells[i].textContent = inputField.value;
                    }
                }
                button.querySelector('img').src = 'https://cdn-icons-png.flaticon.com/512/764/764599.png';
                button.classList.remove('editing');
            } else {
                // 수정 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let currentCell = cells[i];
                    let currentValue = currentCell.textContent;
                    let inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.value = currentValue;
                    currentCell.textContent = '';
                    currentCell.appendChild(inputField);
                }
                button.querySelector('img').src = 'https://static-00.iconduck.com/assets.00/save-icon-2048x2048-iovw4qr4.png';
                button.classList.add('editing');
            }
        });

        newRow1.querySelector('.editButton').addEventListener('click', function (event) {
            let button = event.currentTarget;
            let tableRow = button.parentNode.parentNode;
            let cells = tableRow.querySelectorAll('td');
            let isEditing = button.classList.contains('editing');

            if (isEditing) {
                // 저장 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let inputField = cells[i].querySelector('input');
                    if (inputField) {
                        cells[i].textContent = inputField.value;
                    }
                }
                button.querySelector('img').src = 'https://cdn-icons-png.flaticon.com/512/764/764599.png';
                button.classList.remove('editing');
            } else {
                // 수정 로직
                for (let i = 0; i < cells.length - 2; i++) {
                    let currentCell = cells[i];
                    let currentValue = currentCell.textContent;
                    let inputField = document.createElement('input');
                    inputField.type = 'text';
                    inputField.value = currentValue;
                    currentCell.textContent = '';
                    currentCell.appendChild(inputField);
                }
                button.querySelector('img').src = 'https://static-00.iconduck.com/assets.00/save-icon-2048x2048-iovw4qr4.png';
                button.classList.add('editing');
            }
        });
    });


</script>

</html>